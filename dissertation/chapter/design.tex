\startcomponent design
\product dissertation

\usemodule[chart]
\setupFLOWcharts[nx=4,ny=2,dx=2\bodyfontsize,dy=2\bodyfontsize,maxwidth=\textwidth,height=3\lineheight]
\setupFLOWshapes[framecolor=black,background=color,backgroundcolor=white]

\setuphead[chapter][textstyle={\tfd\sc}]
\startchapter[title=Design,reference=chapter:design]

% This should discuss any practical work done.
% If a significant software product is built then this should include a discussion of each stage of the software development life cycle, including:
% Definition of requirements; Design; Implementation; Testing
% Along with consideration of any tools and technologies used (languages, IDEs, third-party components used, etc).
% Similarly if your practical work has consisted of experimental work, then this should include a discussion of each stage of the experimental process including
% Definition of experimental variables and other requirements; Design of experiments; Implementation; Collection of Results
% Along with consideration of any tools and technologies used.
% This discussion should outline the choices made, along with any alternatives considered and the reasons for those choices.

% This section should assess the discussion of the practical work you have done, such as requirements analysis, software design, construction, installation, experimental work.
% Your testing and/or data collection approach should be included in this section although the results from this form part of the next section.
% You should make it clear what you have done, but you should also include rationales for the approaches and techniques used, as well as a discussion of any ideas that have been rejected.

Any practical or significant work that has been done is going to be described and discussed in this chapter, which includes the requirements, design and planning phases. \par
A detailed illustration of the experimental case study will be given along the whole design of the project. Looking at the supporting software utilised, the requirements, construction and usage will be explained. Each of the tests will be validated and the data collection for such testing shown. \par

\blank[line]

The main idea of the work is based on the probabilistic Recursive Bayesian estimation (also known as Bayes filter) \footnote{\goto{Wikipedia: wikipedia.org/wiki/Recursive Bayesian estimation}[url(https://en.wikipedia.org/wiki/Recursive_Bayesian_estimation)]} technique which will be referred to in all instances. \par
Looking at the future states, the probability of the current given state in relation of the very previous state is conditionally independent and expressed with the following formula: \par

\placenamedformula[formula:bayesian]{Recursive Bayesian estimation}
\definereferenceformat[eqref][left=(,right=)]
%\setupnumber[formula][way=bysection]
\setupformulas[location=left]
\startformula
p(\bf{x}_k|\bf{x}_{k-1},\bf{x}_{k-2},\dots,\bf{x}_0) = p(\bf{x}_k|\bf{x}_{k-1})
\stopformula

Where the probability distribution of the states at the \infull{HMM} (HMM) is written as: \par

\placenamedformula[formula:bayesian]{Recursive Bayesian filter}
\startformula
% p(\bf{z}_k|\bf{x}_k,\bf{x}_{k-1},\dots,\bf{x}_{0}) = p(\bf{z}_k|\bf{x}_{k})
p(\bf{x}_0,\dots,\bf{x}_k,\bf{z}_1,\dots,\bf{z}_k) = p(\bf{x}_0)\prod_{i=1}^k p(\bf{z}_i|\bf{x}_i)p(\bf{x}_i|\bf{x}_{i-1})
\stopformula

The following figure illustrates the flow of a Bayesian Network within a HMM: \par

% \startplacefigure[title={Kalman Filter \\ \tfx Â© Wikipedia},list={Kalman},reference=figure:kalman]
\startplacefigure[title={Hidden Markov model},list={Markov},reference=figure:markov]
% \externalfigure[https://upload.wikimedia.org/wikipedia/commons/thumb/8/81/HMM_Kalman_Filter_Derivation.svg/466px-HMM_Kalman_Filter_Derivation.svg.png][width=50mm]
\scale[scale=500]{
\startFLOWchart[markov]
\startFLOWcell
 \name{bay0}
 \location{1,1}
 \shape{0}
 \connection[rl]{bay1}
\stopFLOWcell
\startFLOWcell
 \name{bay1}
 \location{2,1}
 \shape{35}
 \text{$$x_{k-1}$$}
 \connection[rl]{bay2}
 \connection[bt]{bay3}
\stopFLOWcell
\startFLOWcell
 \name{bay2}
 \location{3,1}
 \shape{35}
 \text{$$x_k$$}
 \connection[bt]{bay4}
 \connection[rl]{bay99}
\stopFLOWcell
\startFLOWcell
 \name{bay3}
 \location{2,2}
 \shape{24}
 \text{$$z_{k-1}$$}
\stopFLOWcell
\startFLOWcell
 \name{bay4}
 \location{3,2}
 \shape{24}
 \text{$$z_k$$}
\stopFLOWcell
\startFLOWcell
 \name{bay99}
 \location{4,1}
 \shape{0}
\stopFLOWcell
\stopFLOWchart
\FLOWchart[markov]
}
\stopplacefigure

\startsection[title=Experimental Work]
% Definition of experimental variables and other requirements; Design of experiments; Implementation; Collection of Results

% requirements analysis, software design, construction, installation, experimental work
% testing and/or data collection approach
% make it clear what you have done, but you should also include rationales for the approaches and techniques used, as well as a discussion of any ideas that have been rejected

detailed version of experiments \par
Experiments \par
Considered Tools: pymc, stan, pybayes, comp site ; choices, alternatives, reasons for choices made \par
Literature: Automobile blackbox, Air blackbox, Bayes in Security (Darktrace), Tesla \par
Risk: Threat Prevention \par
Threats: Hijacking, Pilot Error \par
Links: \par
\goto{Tesla Model S}[url(http://www.heise.de/newsticker/meldung/Tesla-Model-S-laesst-sich-von-fern-kapern-3327510.html)] \\
\goto{priors11}[url(http://www.stat.columbia.edu/~gelman/research/published/priors11.pdf)] \\
\goto{CamDavidsonPilon}[url(http://nbviewer.jupyter.org/github/CamDavidsonPilon/Probabilistic-Programming-and-Bayesian-Methods-for-Hackers/blob/master/Chapter6_Priorities/Chapter6.ipynb)] \\
\goto{Probabilistic}[url(http://camdavidsonpilon.github.io/Probabilistic-Programming-and-Bayesian-Methods-for-Hackers/)] \\
\goto{bayesian-regression}[url(https://www.r-bloggers.com/bayesian-regression-with-stan-part-1-normal-regression/)] \\
\goto{ShinyStanDemo}[url(https://jsg2201.shinyapps.io/ShinyStanDemo/)] \\
\stopsection

% Total number of words per section: 250

\startsection[title={Data Collection}]
Planning \par
Air blaxbox / car blackbox \par
data science \par
\stopsection

% Total number of words per section: 250

\startsection[title={Estimation Model},reference=section:model]
We will look at three models for Bayesian estimation: Kalman filter, Markov process. \par

This formula, see: \in{Equation}{.}[formula:bayesian]. \par

Density \par
Model \par
Behavioural algorithm \par
looking into a model \par

% MathWorld Bayesian Entry
http://mathworld.wolfram.com/KalmanFilter.html \par
http://mathworld.wolfram.com/MarkovProcess.html \par

\placenamedformula[formula:markov]{Markov process}
\startformula
P(x(t_n) <= x_n | x(t_{(n-1)}),\dots,x(t_1)) = P(x(t_n) <= x_n | x(t_{(n-1)}))
\stopformula
\placenamedformula[formula:markov2]{Markov process 2}
\startformula
P(x(t_n) <= x_n | x(t)\ for\ all\ t <= t_{(n-1)}) = P(x(t_n) <= x_n | x(t_{(n-1)}))
\stopformula
\stopsection

% Total number of words per section: 250

\startsection[title={Correlation Graphs}]
The following Graphs, Figures and Tables: \par
\stopsection

% Total number of words per section: 250

\startsection[title=Case Study: Connected Cars]
Case study: connected cars. \par
\stopsection

% Total number of words per section: 250

\startsection[title=Particular Events]
Particular events \par
Events \par
\stopsection

% Total number of words per section: 250

\startsection[title=Similar Requirements for the Community]
Community for connected cars. \par
similar requirements to convince the community \par
\stopsection

% Total number of words per section: 250

\blank[line]

Detailed design descriptions were given in this chapter and the use case taken as an example in the paper was elaborated upon and justified. Closely tied to this is the following chapter, which has taken these design discussions as a base and will give accounts to the results found and the analysis throughout the work that has been done. \par

\stopchapter

% Total number of words: 218/2000

\stopcomponent
